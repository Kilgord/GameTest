[gd_scene load_steps=20 format=3 uid="uid://dkghimn8n3206"]

[ext_resource type="Script" uid="uid://blewsvsx54nhv" path="res://node_2d.gd" id="1_q6r6c"]
[ext_resource type="PackedScene" uid="uid://du6fkhgr3jg2k" path="res://character_body_2d.tscn" id="1_wtcfe"]
[ext_resource type="PackedScene" uid="uid://cdcdx33q82wf5" path="res://Build/shop.tscn" id="2_q6r6c"]
[ext_resource type="Texture2D" uid="uid://b1s2vhjpw1m7w" path="res://art/Jojo Jungle Pack v1/SpriteSheets/tiles_spritesheet.png" id="3_0hol4"]
[ext_resource type="PackedScene" uid="uid://dxvdya3wc68gp" path="res://mob_body_2d.tscn" id="4_0hol4"]
[ext_resource type="Texture2D" uid="uid://cw3ws2ssj0ciu" path="res://art/oak_woods_v1.0/decorations/circle.png" id="6_kdubu"]
[ext_resource type="PackedScene" uid="uid://b3nmpx846d5ao" path="res://Mobs/mushroom.tscn" id="6_rj586"]
[ext_resource type="Texture2D" uid="uid://bm5476044mmx8" path="res://art/bar/Pixel Health Bar/Bar/empty health bar.png" id="7_4d7sh"]
[ext_resource type="Texture2D" uid="uid://cifoe3pfaa5qs" path="res://art/bar/Pixel Health Bar/Health/health.png" id="8_ir8iy"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_epypp"]
texture = ExtResource("3_0hol4")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
7:0/0 = 0
8:0/0 = 0
9:0/0 = 0
10:0/0 = 0
11:0/0 = 0
12:0/0 = 0
12:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
13:0/0 = 0
13:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
14:0/0 = 0
14:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
15:0/0 = 0
15:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
16:0/0 = 0
16:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
17:0/0 = 0
17:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
7:1/0 = 0
8:1/0 = 0
9:1/0 = 0
10:1/0 = 0
11:1/0 = 0
12:1/0 = 0
12:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
13:1/0 = 0
13:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
14:1/0 = 0
14:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
15:1/0 = 0
15:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
16:1/0 = 0
16:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
17:1/0 = 0
17:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
5:2/0 = 0
6:2/0 = 0
7:2/0 = 0
8:2/0 = 0
9:2/0 = 0
10:2/0 = 0
11:2/0 = 0
12:2/0 = 0
13:2/0 = 0
14:2/0 = 0
15:2/0 = 0
16:2/0 = 0
17:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
4:3/0 = 0
5:3/0 = 0
6:3/0 = 0
7:3/0 = 0
8:3/0 = 0
9:3/0 = 0
10:3/0 = 0
11:3/0 = 0
14:3/0 = 0
15:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
4:4/0 = 0
5:4/0 = 0
6:4/0 = 0
7:4/0 = 0
8:4/0 = 0
9:4/0 = 0
10:4/0 = 0
11:4/0 = 0
14:4/0 = 0
15:4/0 = 0
6:5/0 = 0
7:5/0 = 0
8:5/0 = 0
14:5/0 = 0
15:5/0 = 0
16:5/0 = 0
7:6/0 = 0
13:6/0 = 0
14:6/0 = 0
15:6/0 = 0
16:6/0 = 0
17:6/0 = 0

[sub_resource type="TileSet" id="TileSet_0hol4"]
physics_layer_0/collision_layer = 1
physics_layer_0/collision_mask = 0
sources/0 = SubResource("TileSetAtlasSource_epypp")

[sub_resource type="GDScript" id="GDScript_0hol4"]
script/source = "extends Label


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	text = \"HP: \" + str($\"../../Player/CharacterBody2D\".health)
"

[sub_resource type="GDScript" id="GDScript_q6r6c"]
script/source = "extends Label


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	text = \"Gold: \" + str($\"../../Player/CharacterBody2D\".gold)
"

[sub_resource type="Animation" id="Animation_d21ai"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Label3:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_kdubu"]
resource_name = "text"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Label3:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 0.662745)]
}

[sub_resource type="Animation" id="Animation_rj586"]
resource_name = "text_vse"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Label3:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0.694118), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_4d7sh"]
_data = {
&"RESET": SubResource("Animation_d21ai"),
&"text": SubResource("Animation_kdubu"),
&"text_vse": SubResource("Animation_rj586")
}

[sub_resource type="GDScript" id="GDScript_kdubu"]
script/source = "extends Node2D
var gold = preload(\"res://gold.tscn\")


func _on_timer_timeout():
	var goldTemp = gold.instantiate()
	var rgn = RandomNumberGenerator.new()
	var randit = randi_range(100, 550)
	goldTemp.position = Vector2 (randit,250)
	add_child(goldTemp)
"

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_kdubu"]
polygon = PackedVector2Array(30, 408, 486, 415, 1087, 412, 1088, 388, 937, 388, 829, 399, 695, 398, 494, 391, 486, 406, 299, 403, 95, 403, 94, 390, 47, 390, 28, 390)

[node name="Level" type="Node2D"]
script = ExtResource("1_q6r6c")

[node name="BG" type="ParallaxBackground" parent="."]

[node name="Shop" parent="." instance=ExtResource("2_q6r6c")]
position = Vector2(-82, 306)

[node name="TileMap" type="TileMap" parent="."]
tile_set = SubResource("TileSet_0hol4")
format = 2
layer_0/tile_data = PackedInt32Array(1703939, 917504, 0, 1703940, 917504, 0, 1638405, 917504, 0, 1638406, 917504, 0, 1638407, 917504, 0, 1638408, 917504, 0, 1638409, 917504, 0, 1638410, 917504, 0, 1638411, 917504, 0, 1638412, 917504, 0, 1638413, 917504, 0, 1638414, 917504, 0, 1638415, 917504, 0, 1638416, 917504, 0, 1638417, 917504, 0, 1638418, 917504, 0, 1638419, 917504, 0, 1638420, 917504, 0, 1638421, 917504, 0, 1638422, 917504, 0, 1638423, 917504, 0, 1638424, 917504, 0, 1638425, 917504, 0, 1638426, 917504, 0, 1638427, 917504, 0, 1638428, 917504, 0, 1638429, 917504, 0, 1638430, 851968, 1, 1572895, 917504, 0, 1572896, 917504, 0, 1572897, 917504, 0, 1572898, 917504, 0, 1572899, 917504, 0, 1572900, 917504, 0, 1572901, 917504, 0, 1572902, 917504, 0, 1572903, 917504, 0, 1572904, 917504, 0, 1572905, 917504, 0, 1572906, 917504, 0, 1572907, 917504, 0, 1572908, 917504, 0, 1572909, 917504, 0, 1572910, 917504, 0, 1572911, 917504, 0, 1572912, 917504, 0, 1572913, 917504, 0, 1572914, 917504, 0, 1572915, 917504, 0, 1572916, 917504, 0, 1572917, 917504, 0, 1572918, 917504, 0, 1572919, 917504, 0, 1572920, 917504, 0, 1572921, 917504, 0, 1572922, 917504, 0, 1572923, 917504, 0, 1572924, 851968, 1, 1572925, 851968, 1, 1572926, 851968, 1, 1572927, 851968, 1, 1572928, 917504, 0, 1572929, 917504, 0, 1572930, 917504, 0, 1572931, 917504, 0, 1638467, 917504, 0, 1704004, 917504, 0, 1769540, 917504, 0, 1769541, 917504, 0, 1835077, 917504, 0, 1900613, 917504, 0, 1966149, 917504, 0, 2031685, 917504, 0, 2031684, 917504, 0, 2031683, 917504, 0, 2031682, 917504, 0, 2031681, 917504, 0, 2031680, 917504, 0, 2097215, 917504, 0, 2097214, 917504, 0, 2097213, 917504, 0, 2097212, 917504, 0, 2097211, 917504, 0, 2097210, 917504, 0, 2097209, 917504, 0, 2097208, 917504, 0, 2097207, 917504, 0, 2097206, 917504, 0, 2097205, 917504, 0, 2097204, 917504, 0, 2097203, 917504, 0, 2097202, 917504, 0, 2097201, 917504, 0, 2097200, 917504, 0, 2097199, 917504, 0, 2097198, 917504, 0, 2097197, 917504, 0, 2097196, 917504, 0, 2097195, 917504, 0, 2097194, 917504, 0, 2097193, 917504, 0, 2097192, 917504, 0, 2097191, 917504, 0, 2097190, 917504, 0, 2162725, 917504, 0, 2162724, 917504, 0, 2162723, 917504, 0, 2162722, 917504, 0, 2162721, 917504, 0, 2162720, 917504, 0, 2162719, 917504, 0, 2162718, 917504, 0, 2162717, 917504, 0, 2162716, 917504, 0, 2162715, 917504, 0, 2162714, 917504, 0, 2162713, 917504, 0, 2162712, 917504, 0, 2162711, 917504, 0, 2162710, 917504, 0, 2162709, 917504, 0, 2162708, 917504, 0, 2162707, 917504, 0, 2162706, 917504, 0, 2162705, 917504, 0, 2162704, 917504, 0, 2162703, 917504, 0, 2162702, 917504, 0, 2162701, 917504, 0, 2097164, 917504, 0, 2097163, 917504, 0, 2097162, 917504, 0, 2097161, 917504, 0, 2097160, 917504, 0, 2097159, 917504, 0, 2097158, 917504, 0, 2097157, 917504, 0, 2031620, 917504, 0, 2031619, 917504, 0, 2031618, 917504, 0, 1966082, 917504, 0, 1966081, 917504, 0, 1966080, 917504, 0, 1900544, 917504, 0, 1966079, 917504, 0, 1900543, 917504, 0, 1835008, 917504, 0, 1769472, 917504, 0, 1703936, 917504, 0, 1703937, 917504, 0, 1638401, 851968, 1, 1638402, 851968, 1, 1638403, 917504, 0, 1572867, 917504, 0, 1572868, 917504, 0, 1572869, 917504, 0, 1900577, 917504, 0, 1900578, 917504, 0, 1900579, 917504, 0, 1900580, 917504, 0, 1835044, 917504, 0, 1835045, 917504, 0, 1835046, 917504, 0, 1835047, 917504, 0, 1769511, 851968, 1, 1769512, 851968, 1, 1769513, 851968, 1, 1703977, 851968, 1, 1703978, 851968, 1, 1769514, 851968, 1, 1769515, 851968, 1, 1769516, 851968, 1, 1835052, 917504, 0, 1835053, 917504, 0, 1900589, 917504, 0, 1900590, 917504, 0, 1966126, 917504, 0, 1900591, 917504, 0, 1900592, 917504, 0, 1900593, 917504, 0, 1900594, 917504, 0, 1900595, 917504, 0, 1835060, 851968, 1, 1835061, 851968, 1, 1835062, 851968, 1, 1835063, 917504, 0, 1769527, 917504, 0, 1703991, 917504, 0, 1703992, 917504, 0, 1769528, 917504, 0, 1769529, 917504, 0, 1769530, 917504, 0, 1835066, 917504, 0, 1900602, 917504, 0, 1966138, 917504, 0, 1966139, 917504, 0, 1966137, 917504, 0, 1966136, 917504, 0, 1966135, 917504, 0, 1966134, 917504, 0, 1966133, 917504, 0, 1966132, 917504, 0, 1966131, 917504, 0, 1966130, 917504, 0, 1966129, 917504, 0, 1966128, 917504, 0, 1966127, 917504, 0, 1966125, 917504, 0, 1966124, 917504, 0, 2031659, 917504, 0, 2031658, 917504, 0, 2031657, 917504, 0, 2031656, 917504, 0, 2031655, 917504, 0, 2031654, 917504, 0, 2097189, 917504, 0, 2097188, 917504, 0, 2097187, 917504, 0, 2097186, 917504, 0, 2031650, 917504, 0, 2031649, 917504, 0, 1966113, 917504, 0, 1703983, 851968, 1, 1703984, 851968, 1, 1769520, 851968, 1, 1769521, 851968, 1, 1900598, 851968, 1, 1835059, 851968, 1, 1835058, 851968, 1, 1835057, 851968, 1, 1835056, 851968, 1, 1769519, 851968, 1, 1769518, 851968, 1, 1769517, 851968, 1, 1703986, 851968, 1, 1703987, 851968, 1, 1703988, 851968, 1, 1703989, 851968, 1, 1769525, 851968, 1, 1769524, 851968, 1, 1769523, 851968, 1, 1769522, 851968, 1, 1769510, 851968, 1, 1769509, 851968, 1, 1703980, 851968, 1, 1703981, 851968, 1, 1703982, 851968, 1, 1703979, 851968, 1, 1703976, 851968, 1, 1703975, 851968, 1, 1703974, 851968, 1, 1703973, 851968, 1, 1769508, 851968, 1, 1703972, 851968, 1, 1703971, 851968, 1, 1703970, 851968, 1, 1638436, 851968, 1, 1638437, 851968, 1, 1638438, 851968, 1, 1638439, 851968, 1, 1638440, 851968, 1, 1638441, 851968, 1, 1638442, 851968, 1, 1638443, 851968, 1, 1638435, 851968, 1, 1638434, 851968, 1, 1638433, 851968, 1, 1638432, 851968, 1, 1638431, 851968, 1, 1638444, 851968, 1, 1638445, 851968, 1, 1638446, 851968, 1, 1638447, 851968, 1, 1638448, 851968, 1, 1638449, 851968, 1, 1638450, 851968, 1, 1638451, 851968, 1, 1638452, 851968, 1, 1638453, 851968, 1, 1638454, 851968, 1, 1638455, 851968, 1, 1638456, 851968, 1, 1638457, 851968, 1, 1638458, 851968, 1, 1638459, 851968, 1, 1638460, 851968, 1, 1703985, 851968, 1, 1704005, 851968, 1, 1638469, 851968, 1, 1572933, 851968, 1, 1507397, 851968, 1, 1441861, 851968, 1, 1376325, 851968, 1, 1310789, 851968, 1, 1310790, 851968, 1, 1245254, 851968, 1, 1179718, 851968, 1, 1114182, 851968, 1, 1048646, 851968, 1, 983110, 851968, 1, 917574, 851968, 1, 852038, 851968, 1, 786502, 851968, 1, 720966, 851968, 1, 655430, 851968, 1, 589894, 851968, 1, 524358, 851968, 1, 458822, 851968, 1, 393286, 851968, 1, 327750, 851968, 1, 262214, 851968, 1, 262215, 851968, 1, 196679, 851968, 1, 131143, 851968, 1, 65607, 851968, 1, 71, 851968, 1, 1572864, 851968, 1, 1507328, 851968, 1, 1572863, 851968, 1, 1507327, 851968, 1, 1441791, 851968, 1, 1376254, 851968, 1, 1310718, 851968, 1, 1245182, 851968, 1, 1179646, 851968, 1, 1114110, 851968, 1, 1048574, 851968, 1, 983038, 851968, 1, 917502, 851968, 1, 851966, 851968, 1, 786430, 851968, 1, 786431, 851968, 1, 720895, 851968, 1, 655359, 851968, 1, 589823, 851968, 1, 524288, 851968, 1, 458752, 851968, 1, 393216, 851968, 1, 327680, 851968, 1, 262145, 851968, 1, 196609, 851968, 1, 131073, 851968, 1, 65537, 851968, 1, 1, 851968, 1, -65535, 851968, 1, -131071, 851968, 1, 1507332, 851968, 1, 1441796, 851968, 1, 1376260, 851968, 1, 1310723, 851968, 1, 1245187, 851968, 1, 1179651, 851968, 1, 1114115, 851968, 1, 1048579, 851968, 1, 983042, 851968, 1, 917506, 851968, 1, 851970, 851968, 1, 786434, 851968, 1, 720898, 851968, 1, 720899, 851968, 1, 655363, 851968, 1, 589827, 851968, 1, 524291, 851968, 1, 458755, 851968, 1, 393219, 851968, 1, 327683, 851968, 1, 262147, 851968, 1, 196611, 851968, 1, 131075, 851968, 1, 131076, 851968, 1, 65540, 851968, 1, 4, 851968, 1, -65532, 851968, 1, -65533, 851968, 1, -131069, 851968, 1, -196605, 851968, 1)

[node name="Mobs" type="Node2D" parent="."]

[node name="sket" parent="Mobs" instance=ExtResource("4_0hol4")]
position = Vector2(333, 120)

[node name="sket2" parent="Mobs" instance=ExtResource("4_0hol4")]
position = Vector2(527, 119)

[node name="sket3" parent="Mobs" instance=ExtResource("4_0hol4")]
position = Vector2(426, 122)

[node name="Mushroom" parent="Mobs" instance=ExtResource("6_rj586")]
position = Vector2(464, 322)

[node name="Player" type="Node2D" parent="."]

[node name="CharacterBody2D" parent="Player" instance=ExtResource("1_wtcfe")]
position = Vector2(286, 344)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer"]
offset_left = 89.0
offset_top = 7.0
offset_right = 186.0
offset_bottom = 43.0
text = "Hp"
script = SubResource("GDScript_0hol4")

[node name="Label2" type="Label" parent="CanvasLayer"]
offset_left = 90.0
offset_top = 30.0
offset_right = 134.0
offset_bottom = 53.0
text = "Gold"
script = SubResource("GDScript_q6r6c")

[node name="Label3" type="Label" parent="CanvasLayer"]
modulate = Color(1, 1, 1, 0)
offset_left = 544.0
offset_top = 325.0
offset_right = 661.0
offset_bottom = 348.0
text = "СОСНИ ТУНЦА"

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer"]
libraries = {
&"": SubResource("AnimationLibrary_4d7sh")
}

[node name="HealthBar" type="TextureProgressBar" parent="CanvasLayer"]
offset_left = 120.0
offset_top = 13.0
offset_right = 307.0
offset_bottom = 53.0
texture_under = ExtResource("7_4d7sh")
texture_progress = ExtResource("8_ir8iy")

[node name="Collect" type="Node2D" parent="."]
script = SubResource("GDScript_kdubu")

[node name="Timer" type="Timer" parent="Collect"]
wait_time = 3.0
autostart = true

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
position = Vector2(521, 75)
enabled = false
energy = 0.95
blend_mode = 1
range_layer_min = -1

[node name="DayNight" type="Timer" parent="."]
wait_time = 20.0
autostart = true

[node name="PointLight2D" type="PointLight2D" parent="."]
position = Vector2(167, 389.544)
scale = Vector2(0.0431348, 0.0461935)
energy = 1.5
shadow_enabled = true
texture = ExtResource("6_kdubu")
texture_scale = 1.52

[node name="LightOccluder2D" type="LightOccluder2D" parent="."]
position = Vector2(2, -1)
occluder = SubResource("OccluderPolygon2D_kdubu")

[connection signal="health_change" from="Player/CharacterBody2D" to="." method="_on_character_body_2d_health_change"]
[connection signal="timeout" from="Collect/Timer" to="Collect" method="_on_timer_timeout"]
[connection signal="timeout" from="DayNight" to="." method="_on_day_night_timeout"]
